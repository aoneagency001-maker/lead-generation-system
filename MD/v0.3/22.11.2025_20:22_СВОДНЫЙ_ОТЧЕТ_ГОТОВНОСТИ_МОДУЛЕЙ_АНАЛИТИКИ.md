# –°–≤–æ–¥–Ω—ã–π –æ—Ç—á–µ—Ç –æ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –º–æ–¥—É–ª–µ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∏

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 22.11.2025 20:22

## üéØ –û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

| –ú–æ–¥—É–ª—å | Backend | Frontend | –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Data Intake | –û–±—â–∞—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å |
|--------|---------|----------|--------------------------|------------------|
| **Google Analytics 4** | ‚úÖ 100% | ‚úÖ 100% | ‚úÖ 80% | **98%** |
| **–Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∞** | ‚úÖ 90% | ‚úÖ 85% | ‚ö†Ô∏è 50% | **85%** |
| **Data Intake (–æ–±—Ä–∞–±–æ—Ç–∫–∞)** | ‚ö†Ô∏è 60% | ‚ùå 0% | - | **60%** |

**–û–±—â–∞—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã –∞–Ω–∞–ª–∏—Ç–∏–∫–∏:** **80%**

---

## üìä 1. –ú–æ–¥—É–ª—å Google Analytics 4

### ‚úÖ –°—Ç–∞—Ç—É—Å: –ü–û–õ–ù–û–°–¢–¨–Æ –†–ê–ë–û–¢–ê–ï–¢

#### Backend (100% –≥–æ—Ç–æ–≤)

**–§–∞–π–ª—ã:**
- `library/integrations/google_analytics.py` - –ö–ª–∏–µ–Ω—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å GA4 API
- `core/api/routes/google_analytics.py` - API endpoints

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã:**
- ‚úÖ `get_properties()` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ Properties —á–µ—Ä–µ–∑ Admin API
- ‚úÖ `get_report()` - —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –æ—Ç—á–µ—Ç–æ–≤
- ‚úÖ `get_realtime_report()` - real-time –¥–∞–Ω–Ω—ã–µ (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 30 –º–∏–Ω—É—Ç)
- ‚úÖ `get_visitors_by_date()` - –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–∏ –ø–æ –¥–Ω—è–º
- ‚úÖ `get_traffic_sources()` - –∏—Å—Ç–æ—á–Ω–∏–∫–∏ —Ç—Ä–∞—Ñ–∏–∫–∞
- ‚úÖ `get_search_queries()` - —Å–æ–±—ã—Ç–∏—è/–∑–∞–ø—Ä–æ—Å—ã
- ‚úÖ `get_geography()` - –≥–µ–æ–≥—Ä–∞—Ñ–∏—è –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–µ–π
- ‚úÖ `get_online_visitors()` - –æ–Ω–ª–∞–π–Ω –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–∏ (real-time)
- ‚úÖ `get_recent_visits()` - –ø–æ—Å–ª–µ–¥–Ω–∏–µ –ø–æ—Å–µ—â–µ–Ω–∏—è

**API Endpoints:**
- ‚úÖ `GET /api/google-analytics/properties` - —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö Properties
- ‚úÖ `GET /api/google-analytics/summary` - —Å–≤–æ–¥–∫–∞ –ø–æ Property (7 –¥–Ω–µ–π)
- ‚úÖ `GET /api/google-analytics/properties/{id}/visitors-by-date` - –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–∏ –ø–æ –¥–Ω—è–º
- ‚úÖ `GET /api/google-analytics/properties/{id}/traffic-sources` - –∏—Å—Ç–æ—á–Ω–∏–∫–∏ —Ç—Ä–∞—Ñ–∏–∫–∞
- ‚úÖ `GET /api/google-analytics/properties/{id}/search-queries` - —Å–æ–±—ã—Ç–∏—è/–∑–∞–ø—Ä–æ—Å—ã
- ‚úÖ `GET /api/google-analytics/properties/{id}/geography` - –≥–µ–æ–≥—Ä–∞—Ñ–∏—è
- ‚úÖ `GET /api/google-analytics/properties/{id}/online-visitors` - –æ–Ω–ª–∞–π–Ω –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–∏ (real-time)
- ‚úÖ `GET /api/google-analytics/properties/{id}/recent-visits` - –ø–æ—Å–ª–µ–¥–Ω–∏–µ –ø–æ—Å–µ—â–µ–Ω–∏—è
- ‚úÖ `GET /api/google-analytics/properties/{id}/report` - —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π endpoint

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- ‚úÖ –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞ –ø–æ —Ç–∏–ø–∞–º (–†–µ–∫–ª–∞–º–∞, –û—Ä–≥–∞–Ω–∏–∫–∞, –ü—Ä—è–º–æ–π, –°–æ—Ü—Å–µ—Ç–∏, –° –¥—Ä—É–≥–∏—Ö —Å–∞–π—Ç–æ–≤)
- ‚úÖ –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–∫–ª–∞–º—ã (Google Ads, Yandex Direct, Facebook Ads –∏ —Ç.–¥.)
- ‚úÖ –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π Bar chart –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏
- ‚úÖ –°–≤–æ–¥–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Å –∫–Ω–æ–ø–∫–æ–π –ø–æ–∫–∞–∑–∞—Ç—å/—Å–∫—Ä—ã—Ç—å
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ Service Account –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ JSON credentials

#### Frontend (100% –≥–æ—Ç–æ–≤)

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- ‚úÖ `PropertySelector` - –≤—ã–±–æ—Ä Property –∏–∑ —Å–ø–∏—Å–∫–∞
- ‚úÖ `SummaryView` - —Å–≤–æ–¥–∫–∞ —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏ –∏ —Ç–æ–ø –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏
- ‚úÖ `AnalyticsDashboard` - –≥—Ä–∞—Ñ–∏–∫–∏ –∏ —Ç–∞–±–ª–∏—Ü—ã –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
- ‚úÖ `OnlineVisitors` - real-time –æ–Ω–ª–∞–π–Ω –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–∏
- ‚úÖ `RecentVisits` - —Ç–∞–±–ª–∏—Ü–∞ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –ø–æ—Å–µ—â–µ–Ω–∏–π

**–°—Ç—Ä–∞–Ω–∏—Ü—ã:**
- ‚úÖ `/dashboard/analytics/google-analytics` - –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ GA4
- ‚úÖ `/dashboard/analytics` - –æ–±–∑–æ—Ä–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –∫–∞—Ä—Ç–æ—á–∫–æ–π GA4

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- ‚úÖ –ì—Ä–∞—Ñ–∏–∫ "–ê–Ω–∞–ª–∏–∑ —Ç—Ä–∞—Ñ–∏–∫–∞ –ø–æ —Ç–∏–ø–∞–º" —Å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–µ–π —Ä–µ–∫–ª–∞–º—ã
- ‚úÖ –°–≤–æ–¥–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Å–æ –≤—Å–µ–º–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏
- ‚úÖ –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π Bar chart –¥–ª—è –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ —Ç—Ä–∞—Ñ–∏–∫–∞
- ‚úÖ Real-time –¥–∞–Ω–Ω—ã–µ (–æ–Ω–ª–∞–π–Ω –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–∏)
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ –∫–∞–∂–¥–æ–º—É –∏—Å—Ç–æ—á–Ω–∏–∫—É

#### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Data Intake (80% –≥–æ—Ç–æ–≤)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–†–ï–ê–õ–ò–ó–û–í–ê–ù–û** (–æ–±–Ω–æ–≤–ª–µ–Ω–æ 22.11.2025 21:30)

**–ß—Ç–æ –µ—Å—Ç—å:**
- ‚úÖ `data_intake/providers/google_analytics.py` - –ø—Ä–æ–≤–∞–π–¥–µ—Ä –¥–ª—è Data Intake –º–æ–¥—É–ª—è (375 —Å—Ç—Ä–æ–∫)
- ‚úÖ –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö GA4 –≤ —Ñ–æ—Ä–º–∞—Ç `VisitEvent` / `NormalizedEvent`
- ‚úÖ –ú–µ—Ç–æ–¥—ã `fetch_visits()`, `health_check()`, `fetch_raw_for_storage()`
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ `DataIntakeService`
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º `GoogleAnalyticsClient`

**–ß—Ç–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç:**
- ‚ö†Ô∏è –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å pipeline (L1 ‚Üí L2 ‚Üí L3) - pipeline –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚ö†Ô∏è –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ –ë–î - –Ω–µ—Ç –≤–æ—Ä–∫–µ—Ä–∞ –¥–ª—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏

---

## üìä 2. –ú–æ–¥—É–ª—å –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∏

### ‚úÖ –°—Ç–∞—Ç—É—Å: 85% –ì–û–¢–û–í

#### Backend (90% –≥–æ—Ç–æ–≤)

**–§–∞–π–ª—ã:**
- `library/integrations/yandex_metrika.py` - –ö–ª–∏–µ–Ω—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∏
- `core/api/routes/yandex_metrika.py` - API endpoints
- `library/utils/search_segmentation.py` - –°–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ–∏—Å–∫–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã:**
- ‚úÖ `get_counters()` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Å—á–µ—Ç—á–∏–∫–æ–≤
- ‚úÖ `get_counter_info()` - –¥–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å—á–µ—Ç—á–∏–∫–µ
- ‚úÖ `get_report()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç—á–µ—Ç–æ–≤ —á–µ—Ä–µ–∑ Reporting API
- ‚úÖ `get_visitors_by_date()` - –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–∏ –ø–æ –¥–Ω—è–º
- ‚úÖ `get_traffic_sources()` - –∏—Å—Ç–æ—á–Ω–∏–∫–∏ —Ç—Ä–∞—Ñ–∏–∫–∞
- ‚úÖ `get_search_queries()` - –ø–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- ‚úÖ `get_search_queries_with_landing_pages()` - –∑–∞–ø—Ä–æ—Å—ã —Å landing pages (3 –≤–∞—Ä–∏–∞–Ω—Ç–∞ fallback)
- ‚úÖ `get_search_queries_detailed()` - –¥–µ—Ç–∞–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã —Å —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏–µ–π
- ‚úÖ `get_geography()` - –≥–µ–æ–≥—Ä–∞—Ñ–∏—è –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–µ–π
- ‚úÖ `get_utm_path()` - UTM –ø—É—Ç–∏
- ‚úÖ `get_recent_visits()` - –ø–æ—Å–ª–µ–¥–Ω–∏–µ –ø–æ—Å–µ—â–µ–Ω–∏—è —Å –ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
- ‚úÖ `get_online_visitors()` - –æ–Ω–ª–∞–π–Ω –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- ‚ö†Ô∏è `get_logs()` - —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ —ç–∫—Å–ø–æ—Ä—Ç –ª–æ–≥–æ–≤ (—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ, –ù–ï –ü–†–û–¢–ï–°–¢–ò–†–û–í–ê–ù–û)
- ‚ö†Ô∏è `check_log_status()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ª–æ–≥–æ–≤ (—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ, –ù–ï –ü–†–û–¢–ï–°–¢–ò–†–û–í–ê–ù–û)
- ‚ö†Ô∏è `download_log_part()` - —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ —á–∞—Å—Ç–µ–π –ª–æ–≥–æ–≤ (—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ, –ù–ï –ü–†–û–¢–ï–°–¢–ò–†–û–í–ê–ù–û)

**API Endpoints:**
- ‚úÖ `GET /api/yandex-metrika/counters` - —Å–ø–∏—Å–æ–∫ —Å—á–µ—Ç—á–∏–∫–æ–≤
- ‚úÖ `GET /api/yandex-metrika/counters/{id}/report` - –æ—Ç—á–µ—Ç—ã
- ‚úÖ `GET /api/yandex-metrika/summary` - –ø–æ–ª–Ω–∞—è —Å–≤–æ–¥–∫–∞
- ‚úÖ `GET /api/yandex-metrika/counters/{id}/visitors-by-date` - –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–∏ –ø–æ –¥–Ω—è–º
- ‚úÖ `GET /api/yandex-metrika/counters/{id}/traffic-sources` - –∏—Å—Ç–æ—á–Ω–∏–∫–∏ —Ç—Ä–∞—Ñ–∏–∫–∞
- ‚úÖ `GET /api/yandex-metrika/counters/{id}/search-queries` - –ø–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- ‚úÖ `GET /api/yandex-metrika/counters/{id}/search-queries-detailed` - –¥–µ—Ç–∞–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã —Å —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏–µ–π
- ‚úÖ `GET /api/yandex-metrika/counters/{id}/search-queries-by-segment` - –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ —Å–µ–≥–º–µ–Ω—Ç–∞–º
- ‚úÖ `GET /api/yandex-metrika/counters/{id}/geography` - –≥–µ–æ–≥—Ä–∞—Ñ–∏—è
- ‚úÖ `GET /api/yandex-metrika/counters/{id}/utm-path` - UTM –ø—É—Ç–∏
- ‚úÖ `GET /api/yandex-metrika/counters/{id}/online-visitors` - –æ–Ω–ª–∞–π–Ω –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–∏
- ‚úÖ `GET /api/yandex-metrika/counters/{id}/recent-visits` - –ø–æ—Å–ª–µ–¥–Ω–∏–µ –ø–æ—Å–µ—â–µ–Ω–∏—è

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- ‚úÖ Fallback-–ª–æ–≥–∏–∫–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è landing pages (3 –≤–∞—Ä–∏–∞–Ω—Ç–∞ dimensions)
- ‚úÖ –°–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ–∏—Å–∫–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ (8 —Ç–∏–ø–æ–≤: –ë—Ä–µ–Ω–¥, –ü—Ä–æ–¥—É–∫—Ç, –ü—Ä–æ–±–ª–µ–º–∞, –†–µ—à–µ–Ω–∏–µ –∏ —Ç.–¥.)
- ‚úÖ –û—Ü–µ–Ω–∫–∞ "–≥–æ—Ä—è—á–µ—Å—Ç–∏" –∑–∞–ø—Ä–æ—Å–æ–≤ (heat score)
- ‚úÖ –ü–æ–¥—Å—á–µ—Ç –Ω–æ–º–µ—Ä–∞ –ø–æ—Å–µ—â–µ–Ω–∏—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ—Å–µ—Ç–∏—Ç–µ–ª—è
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –∫–æ–¥–∏—Ä–æ–≤–∫–∏ UTF-8

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ö†Ô∏è –ú–µ—Ç–æ–¥—ã Logs API –Ω–µ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã
- ‚ö†Ô∏è –ù–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è (–∫–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å –¥–µ–ª–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤—ã–∑–æ–≤–æ–≤ –∫ API)
- ‚ö†Ô∏è –ù–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –≤ –ë–î

#### Frontend (85% –≥–æ—Ç–æ–≤)

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- ‚úÖ `CounterSelector` - –≤—ã–±–æ—Ä —Å—á–µ—Ç—á–∏–∫–∞ (95% –≥–æ—Ç–æ–≤)
- ‚úÖ `SummaryView` - –ø–æ–ª–Ω–∞—è —Å–≤–æ–¥–∫–∞ –ø–æ —Å—á–µ—Ç—á–∏–∫—É (95% –≥–æ—Ç–æ–≤)
- ‚úÖ `OnlineVisitors` - –æ–Ω–ª–∞–π–Ω –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–∏ (95% –≥–æ—Ç–æ–≤)
- ‚úÖ `AnalyticsDashboard` - –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏ (90% –≥–æ—Ç–æ–≤)
- ‚úÖ `SearchQueriesSegmented` - —Å–µ–≥–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã (95% –≥–æ—Ç–æ–≤)
- ‚úÖ `RecentVisits` - —Ç–∞–±–ª–∏—Ü–∞ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –ø–æ—Å–µ—â–µ–Ω–∏–π (95% –≥–æ—Ç–æ–≤)

**–°—Ç—Ä–∞–Ω–∏—Ü—ã:**
- ‚úÖ `/dashboard/analytics/yandex-metrika` - –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- ‚úÖ –í—ã–±–æ—Ä —Å—á–µ—Ç—á–∏–∫–∞ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤ localStorage
- ‚úÖ –ü–∞–≥–∏–Ω–∞—Ü–∏—è —Ç–∞–±–ª–∏—Ü (10/25/50/100 –∑–∞–ø–∏—Å–µ–π)
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ –ø–æ–∏—Å–∫
- ‚úÖ –ì—Ä–∞—Ñ–∏–∫–∏ (LineChart, PieChart, BarChart)
- ‚úÖ –°–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ —Å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–º–∏ –∫–Ω–æ–ø–∫–∞–º–∏
- ‚úÖ –ù–æ–º–µ—Ä –ø–æ—Å–µ—â–µ–Ω–∏—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ—Å–µ—Ç–∏—Ç–µ–ª—è

#### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Data Intake (50% –≥–æ—Ç–æ–≤)

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è **–ß–ê–°–¢–ò–ß–ù–û –†–ï–ê–õ–ò–ó–û–í–ê–ù–û**

**–ß—Ç–æ –µ—Å—Ç—å:**
- ‚úÖ `data_intake/providers/yandex_metrika.py` - –ø—Ä–æ–≤–∞–π–¥–µ—Ä –¥–ª—è Data Intake –º–æ–¥—É–ª—è
- ‚úÖ –ö–ª–∞—Å—Å `YandexMetrikaProvider` –Ω–∞—Å–ª–µ–¥—É–µ—Ç—Å—è –æ—Ç `BaseAnalyticsProvider`
- ‚úÖ –ú–µ—Ç–æ–¥ `fetch_visits()` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤–∏–∑–∏—Ç–æ–≤ —á–µ—Ä–µ–∑ Reporting API
- ‚úÖ –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ —Ñ–æ—Ä–º–∞—Ç `VisitEvent`
- ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –≤ `DataIntakeService`

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ö†Ô∏è –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Reporting API (–∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ), –∞ –Ω–µ Logs API (—Å—ã—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ)
- ‚ö†Ô∏è –ù–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Logs API –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ —Ä–∞—Å—á–µ—Ç–∞ `active_time_sec`
- ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç `YANDEX_METRIKA_COUNTER_ID` –≤ env, –Ω–æ –æ—Å–Ω–æ–≤–Ω–æ–π –º–æ–¥—É–ª—å —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –Ω–µ–≥–æ
- ‚ö†Ô∏è –ù–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –≤ –ë–î
- ‚ö†Ô∏è –ù–µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å pipeline (L1 ‚Üí L2 ‚Üí L3)

**–ß—Ç–æ –Ω—É–∂–Ω–æ:**
1. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å Logs API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å—ã—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö
2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ –ë–î —á–µ—Ä–µ–∑ pipeline
3. –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è –≤ `NormalizedEvent` –∏ `SessionFeatures`

---

## üîÑ 3. –ú–æ–¥—É–ª—å Data Intake (–æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö)

### ‚ö†Ô∏è –°—Ç–∞—Ç—É—Å: 60% –ì–û–¢–û–í

#### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (100% –≥–æ—Ç–æ–≤)

**–¢—Ä–µ—Ö—Å–ª–æ–π–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**
- ‚úÖ **L1 (Raw):** `RawEvent` - —Å—ã—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –∫–∞–∫ –µ—Å—Ç—å –∏–∑ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
- ‚úÖ **L2 (Normalized):** `NormalizedEvent` - —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç
- ‚úÖ **L3 (Features):** `SessionFeatures` - –≤—ã—á–∏—Å–ª–µ–Ω–Ω—ã–µ —Ñ–∏—á–∏ –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏

**–ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö:**
- ‚úÖ `data_intake/models.py` - –≤—Å–µ –º–æ–¥–µ–ª–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã
- ‚úÖ `SourceType` enum - –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç YANDEX_METRIKA, GOOGLE_ANALYTICS
- ‚úÖ `TrafficSourceType` enum - –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ —Ç—Ä–∞—Ñ–∏–∫–∞
- ‚úÖ `SegmentType` enum - —Ç–∏–ø—ã —Å–µ–≥–º–µ–Ω—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ `DecisionStage` enum - —Å—Ç–∞–¥–∏–∏ –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏—è

#### –ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã (50% –≥–æ—Ç–æ–≤)

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- ‚úÖ `data_intake/providers/base.py` - –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å `BaseAnalyticsProvider`
- ‚úÖ `data_intake/providers/yandex_metrika.py` - –ø—Ä–æ–≤–∞–π–¥–µ—Ä –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∏
- ‚ùå `data_intake/providers/google_analytics.py` - **–ù–ï –†–ï–ê–õ–ò–ó–û–í–ê–ù–û**

**–°–µ—Ä–≤–∏—Å—ã:**
- ‚úÖ `data_intake/service.py` - `DataIntakeService` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏
- ‚úÖ `data_intake/pipeline.py` - `DataIntakePipeline` –¥–ª—è ETL –ø—Ä–æ—Ü–µ—Å—Å–∞
- ‚ö†Ô∏è Pipeline —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω, –Ω–æ –Ω–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω

#### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ë–î (40% –≥–æ—Ç–æ–≤)

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è **–ß–ê–°–¢–ò–ß–ù–û**

**–ß—Ç–æ –µ—Å—Ç—å:**
- ‚úÖ –ú–æ–¥–µ–ª–∏ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö (RawEvent, NormalizedEvent, SessionFeatures)
- ‚úÖ –°—Ö–µ–º–∞ –ë–î –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –≤ `data_intake/storage.py`
- ‚ö†Ô∏è –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Supabase —á–∞—Å—Ç–∏—á–Ω–∞—è

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ö†Ô∏è –ù–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
- ‚ö†Ô∏è Pipeline –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚ö†Ô∏è –ù–µ—Ç –≤–æ—Ä–∫–µ—Ä–∞ –¥–ª—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö

---

## üîó 4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –º–æ–¥—É–ª–µ–π

### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

#### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ FastAPI (100% –≥–æ—Ç–æ–≤)

**–§–∞–π–ª:** `core/api/main.py`

```python
# –û–±–∞ –º–æ–¥—É–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω—ã –∫ –æ—Å–Ω–æ–≤–Ω–æ–º—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é
app.include_router(yandex_metrika.router, prefix="/api", tags=["Yandex Metrika"])
app.include_router(google_analytics.router, prefix="/api", tags=["Google Analytics"])

# Data Intake –º–æ–¥—É–ª—å –ø–æ–¥–∫–ª—é—á–µ–Ω
if DATA_INTAKE_AVAILABLE:
    app.include_router(data_intake_router, prefix="/api", tags=["Data Intake"])
```

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–†–ê–ë–û–¢–ê–ï–¢**

#### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Data Intake (30% –≥–æ—Ç–æ–≤)

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è **–ß–ê–°–¢–ò–ß–ù–û**

**–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- ‚úÖ –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∞ –∏–º–µ–µ—Ç –ø—Ä–æ–≤–∞–π–¥–µ—Ä –≤ Data Intake
- ‚úÖ –ü—Ä–æ–≤–∞–π–¥–µ—Ä –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –≤ `DataIntakeService`
- ‚úÖ –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –æ–±–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∞

**–ß—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- ‚ö†Ô∏è –ù–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –æ–±–æ–∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ (–ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –µ—Å—Ç—å, –Ω–æ –Ω–µ—Ç –≤–æ—Ä–∫–µ—Ä–∞)
- ‚ö†Ô∏è Pipeline –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (–∫–æ–¥ –µ—Å—Ç—å, –Ω–æ –Ω–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏)
- ‚ùå –ù–µ—Ç –µ–¥–∏–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –æ–±–æ–∏–º–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏ (Unified Analytics Layer)

---

## üìã 5. –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –¥–ª—è –ø–æ–ª–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: –ö—Ä–∏—Ç–∏—á–Ω–æ

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö** ‚úÖ –ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã –≥–æ—Ç–æ–≤—ã, –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤–æ—Ä–∫–µ—Ä
   - –°–æ–∑–¥–∞—Ç—å –≤–æ—Ä–∫–µ—Ä/–∑–∞–¥–∞—á—É –¥–ª—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ pipeline (L1 ‚Üí L2 ‚Üí L3)
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Logs API –¥–ª—è –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∏ (—Å—ã—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ)

2. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö**
   - –°–æ–∑–¥–∞—Ç—å –≤–æ—Ä–∫–µ—Ä/–∑–∞–¥–∞—á—É –¥–ª—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
   - –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å Logs API –¥–ª—è –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∏ (—Å—ã—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ)
   - –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å Data API –¥–ª—è GA4
   - –ó–∞–ø—É—Å–∫–∞—Ç—å pipeline –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (L1 ‚Üí L2 ‚Üí L3)

3. **–£–ª—É—á—à–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∏ —Å Data Intake**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Logs API –≤–º–µ—Å—Ç–æ Reporting API –¥–ª—è —Ç–æ—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É —Å—Ç–∞—Ç—É—Å–æ–≤ –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ —ç–∫—Å–ø–æ—Ä—Ç
   - –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –∏ –ø–∞—Ä—Å–∏–Ω–≥ —á–∞—Å—Ç–µ–π –ª–æ–≥–æ–≤
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ raw_events ‚Üí normalized_events ‚Üí feature_store

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: –í–∞–∂–Ω–æ

4. **–î–æ–±–∞–≤–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - Redis –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è summary endpoints
   - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–∏—Å–∫–æ–≤ —Å—á–µ—Ç—á–∏–∫–æ–≤/properties
   - TTL: 5-10 –º–∏–Ω—É—Ç –¥–ª—è summary, 1 —á–∞—Å –¥–ª—è —Å–ø–∏—Å–∫–æ–≤

5. **–£–ª—É—á—à–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫**
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (counter_id, property_id, –¥–∞—Ç—ã)
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ rate limiting –æ—Ç API
   - Retry –ª–æ–≥–∏–∫–∞ –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ—à–∏–±–æ–∫

6. **–î–æ–±–∞–≤–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**
   - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
   - –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
   - –ê–ª–µ—Ä—Ç—ã –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: –ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ

7. **–£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã**
   - –ï–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–æ–≤ –¥–ª—è –æ–±–æ–∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
   - –û–±—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã frontend –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
   - –ï–¥–∏–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Ç—Ä–∞—Ñ–∏–∫–∞

8. **–î–æ–±–∞–≤–∏—Ç—å —ç–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö**
   - CSV/Excel —ç–∫—Å–ø–æ—Ä—Ç –¥–ª—è –æ—Ç—á–µ—Ç–æ–≤
   - API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ BI –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏

---

## üìä 6. –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π

| –§—É–Ω–∫—Ü–∏—è | Google Analytics 4 | –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∞ | Data Intake |
|---------|-------------------|----------------|-------------|
| **–ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö** | ‚úÖ 100% | ‚úÖ 90% | ‚ö†Ô∏è 50% |
| **Real-time –¥–∞–Ω–Ω—ã–µ** | ‚úÖ –î–∞ | ‚úÖ –î–∞ | ‚ùå –ù–µ—Ç |
| **–ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞** | ‚úÖ –î–∞ (5 —Ç–∏–ø–æ–≤) | ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ | ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ |
| **–°–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤** | ‚ùå –ù–µ—Ç | ‚úÖ –î–∞ (8 —Ç–∏–ø–æ–≤) | ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ |
| **Landing pages** | ‚úÖ –î–∞ | ‚úÖ –î–∞ (fallback) | ‚ùå –ù–µ—Ç |
| **–ì–µ–æ–≥—Ä–∞—Ñ–∏—è** | ‚úÖ –î–∞ | ‚úÖ –î–∞ | ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ |
| **–û–Ω–ª–∞–π–Ω –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–∏** | ‚úÖ –î–∞ | ‚úÖ –î–∞ | ‚ùå –ù–µ—Ç |
| **–ü–æ—Å–ª–µ–¥–Ω–∏–µ –ø–æ—Å–µ—â–µ–Ω–∏—è** | ‚úÖ –î–∞ | ‚úÖ –î–∞ | ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ |
| **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ë–î** | ‚ùå –ù–µ—Ç | ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ | ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ |
| **Pipeline –æ–±—Ä–∞–±–æ—Ç–∫–∞** | ‚ùå –ù–µ—Ç | ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ | ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ |

---

## üéØ 7. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

1. **Google Analytics 4** - –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —á–µ—Ä–µ–∑ API –∏ Frontend
2. **–Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∞** - –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —á–µ—Ä–µ–∑ API –∏ Frontend (85%)
3. –û–±–∞ –º–æ–¥—É–ª—è —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –∏ –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ

### –î–ª—è –ø–æ–ª–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

1. –°–æ–∑–¥–∞—Ç—å `GoogleAnalyticsProvider` –¥–ª—è Data Intake
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö
3. –£–ª—É—á—à–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å Logs API –¥–ª—è –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∏
4. –ó–∞–ø—É—Å—Ç–∏—Ç—å pipeline –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö (L1 ‚Üí L2 ‚Üí L3)

### –î–ª—è production

1. –î–æ–±–∞–≤–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ (Redis)
2. –£–ª—É—á—à–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—é
3. –î–æ–±–∞–≤–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
4. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö

---

## üìù 8. –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
- ‚úÖ –û–±–∞ –º–æ–¥—É–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ (GA4 –∏ –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∞) –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã —á–µ—Ä–µ–∑ API –∏ Frontend
- ‚ö†Ô∏è –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –º–æ–¥—É–ª–µ–º –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö (Data Intake) —á–∞—Å—Ç–∏—á–Ω–∞—è
- ‚ö†Ô∏è –ù–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –≤ –ë–î

**–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å:**
- **Google Analytics 4:** 98% (–ø—Ä–æ–≤–∞–π–¥–µ—Ä –≥–æ—Ç–æ–≤, –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏)
- **–Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∞:** 85% (–Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç –ø–æ–ª–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Data Intake –∏ Logs API)
- **Data Intake:** 70% (–æ–±–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –≥–æ—Ç–æ–≤—ã, –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏)

**–û–±—â–∞—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã –∞–Ω–∞–ª–∏—Ç–∏–∫–∏:** **85%** (–æ–±–Ω–æ–≤–ª–µ–Ω–æ 22.11.2025 21:30)

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**
1. ‚úÖ GoogleAnalyticsProvider –¥–ª—è Data Intake - **–ì–û–¢–û–í–û** (–æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ 22.11.2025 21:30)
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö (—Å–æ–∑–¥–∞—Ç—å –≤–æ—Ä–∫–µ—Ä)
3. –£–ª—É—á—à–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å Logs API –¥–ª—è –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∏
4. –°–æ–∑–¥–∞—Ç—å Unified Analytics Layer (–æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ GA4 + –Ø–Ω–¥–µ–∫—Å)

---

**–î–∞—Ç–∞ –æ—Ç—á–µ—Ç–∞:** 22.11.2025 20:22  
**–í–µ—Ä—Å–∏—è:** 1.0


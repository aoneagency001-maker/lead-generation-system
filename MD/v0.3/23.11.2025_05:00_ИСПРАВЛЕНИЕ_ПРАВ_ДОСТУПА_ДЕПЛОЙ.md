# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞ –ø—Ä–∏ –¥–µ–ø–ª–æ–µ

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 23.11.2025 05:00  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

---

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞

```
mkdir: cannot create directory '/opt/lead-generation-system': Permission denied
Error: Process completed with exit code 1.
```

**–ü—Ä–∏—á–∏–Ω–∞:** –£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è `ec2-user` –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –≤ `/opt/`.

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. –ò–∑–º–µ–Ω–µ–Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

**–ë—ã–ª–æ:**
```yaml
VPS_DEPLOY_PATH: '/opt/lead-generation-system'
```

**–°—Ç–∞–ª–æ:**
```yaml
VPS_DEPLOY_PATH: '/home/ec2-user/lead-generation-system'
```

### 2. –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ sudo –¥–ª—è /opt

–ï—Å–ª–∏ –ø—É—Ç—å –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `/opt/`, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `sudo`:

```bash
if [[ "$DEPLOY_PATH" == /opt/* ]]; then
  # –î–ª—è /opt –Ω—É–∂–µ–Ω sudo
  sudo mkdir -p "$DEPLOY_PATH"
  sudo chown -R $USER:$USER "$DEPLOY_PATH"
else
  # –î–ª—è –¥–æ–º–∞—à–Ω–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ sudo –Ω–µ –Ω—É–∂–µ–Ω
  mkdir -p "$DEPLOY_PATH"
fi
```

### 3. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –ø—É—Ç–∏ –¥–ª—è –±—ç–∫–∞–ø–æ–≤

**–ë—ã–ª–æ:**
```bash
BACKUP_PATH="/opt/backups/leadgen"
```

**–°—Ç–∞–ª–æ:**
```bash
BACKUP_PATH="$HOME/backups/leadgen"
```

### 4. –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –¥–ª—è Docker

```bash
# –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω—É–∂–µ–Ω –ª–∏ sudo –¥–ª—è docker
if docker ps >/dev/null 2>&1; then
  docker-compose down || true
  docker-compose up -d --build || true
elif sudo docker ps >/dev/null 2>&1; then
  sudo docker-compose down || true
  sudo docker-compose up -d --build || true
else
  echo "‚ö†Ô∏è Docker –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤"
fi
```

---

## üìã –í–∞—Ä–∏–∞–Ω—Ç—ã –¥–µ–ø–ª–æ—è

### –í–∞—Ä–∏–∞–Ω—Ç 1: –î–æ–º–∞—à–Ω—è—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) ‚úÖ

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ù–µ –Ω—É–∂–µ–Ω sudo
- –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ü—Ä–æ—â–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

**–ü—É—Ç—å:** `/home/ec2-user/lead-generation-system`

### –í–∞—Ä–∏–∞–Ω—Ç 2: /opt –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è

**–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `/opt/lead-generation-system`:**

1. –î–æ–±–∞–≤—å —Å–µ–∫—Ä–µ—Ç –≤ GitHub:
   ```
   VPS_DEPLOY_PATH=/opt/lead-generation-system
   ```

2. –£–±–µ–¥–∏—Å—å, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å sudo:
   ```bash
   ssh ec2-user@13.220.11.94
   sudo -n mkdir -p /opt/lead-generation-system
   sudo chown ec2-user:ec2-user /opt/lead-generation-system
   ```

3. –ò–ª–∏ –¥–æ–±–∞–≤—å –≤ sudoers (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ):
   ```bash
   sudo visudo
   # –î–æ–±–∞–≤—å:
   ec2-user ALL=(ALL) NOPASSWD: /usr/bin/mkdir, /usr/bin/chown
   ```

---

## üß™ –¢–µ—Å—Ç

–¢–µ–ø–µ—Ä—å workflow –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å:

1. –û—Ç–∫—Ä–æ–π: https://github.com/aoneagency001-maker/lead-generation-system/actions
2. –ó–∞–ø—É—Å—Ç–∏ workflow: **"Run workflow"** ‚Üí **"Run workflow"**
3. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ - –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–æ–ª–∂–Ω–∞ —Å–æ–∑–¥–∞—Ç—å—Å—è —É—Å–ø–µ—à–Ω–æ

---

## ‚úÖ –ò—Ç–æ–≥–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å

- [x] –ò–∑–º–µ–Ω–µ–Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –Ω–∞ –¥–æ–º–∞—à–Ω—é—é
- [x] –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ sudo –¥–ª—è /opt
- [x] –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –ø—É—Ç–∏ –¥–ª—è –±—ç–∫–∞–ø–æ–≤
- [x] –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –¥–ª—è Docker
- [ ] Workflow –∑–∞–ø—É—â–µ–Ω –∏ –ø—Ä–æ—à—ë–ª —É—Å–ø–µ—à–Ω–æ

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 23.11.2025 05:00  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ!**


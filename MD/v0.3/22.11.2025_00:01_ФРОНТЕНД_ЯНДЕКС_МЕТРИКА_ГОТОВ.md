# ‚úÖ –§—Ä–æ–Ω—Ç–µ–Ω–¥ –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∏ –≥–æ—Ç–æ–≤

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 22.11.2025 00:01

## üé® –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç AnalyticsDashboard

**–§–∞–π–ª:** `frontend/components/yandex-metrika/AnalyticsDashboard.tsx`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- ‚úÖ –ì—Ä–∞—Ñ–∏–∫ –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏ –ø–æ –¥–Ω—è–º (ComposedChart: Bar + Line)
- ‚úÖ –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ —Ç—Ä–∞—Ñ–∏–∫–∞ (Pie Chart)
- ‚úÖ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ (Bar Chart)
- ‚úÖ –¢–û–ü –ø–æ–∏—Å–∫–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ (—Ç–∞–±–ª–∏—Ü–∞)
- ‚úÖ –ì–µ–æ–≥—Ä–∞—Ñ–∏—è –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–µ–π (—Ç–∞–±–ª–∏—Ü–∞)
- ‚úÖ –í—ã–±–æ—Ä –ø–µ—Ä–∏–æ–¥–∞ (7, 14, 30, 90 –¥–Ω–µ–π)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

**–ì—Ä–∞—Ñ–∏–∫–∏:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫—É **Recharts** (—É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞)
- –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω (ResponsiveContainer)
- –¢–µ–º–Ω–∞—è —Ç–µ–º–∞ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ —Ü–≤–µ—Ç–∞–º–∏
- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏ (Tooltip)

### 2. Backend Endpoints

**–§–∞–π–ª:** `core/api/routes/yandex_metrika.py`

**–ù–æ–≤—ã–µ endpoints:**
- ‚úÖ `GET /api/yandex-metrika/counters/{counter_id}/visitors-by-date?days=30`
- ‚úÖ `GET /api/yandex-metrika/counters/{counter_id}/traffic-sources?days=30&limit=20`
- ‚úÖ `GET /api/yandex-metrika/counters/{counter_id}/search-queries?days=30&limit=50`
- ‚úÖ `GET /api/yandex-metrika/counters/{counter_id}/geography?days=30`
- ‚úÖ `GET /api/yandex-metrika/counters/{counter_id}/utm-path?days=30`

### 3. –ú–µ—Ç–æ–¥—ã –≤ YandexMetrikaClient

**–§–∞–π–ª:** `library/integrations/yandex_metrika.py`

**–ù–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã:**
- ‚úÖ `get_visitors_by_date()` - –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–∏ –ø–æ –¥–Ω—è–º
- ‚úÖ `get_traffic_sources()` - –∏—Å—Ç–æ—á–Ω–∏–∫–∏ —Ç—Ä–∞—Ñ–∏–∫–∞
- ‚úÖ `get_search_queries()` - –ø–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- ‚úÖ `get_geography()` - –≥–µ–æ–≥—Ä–∞—Ñ–∏—è
- ‚úÖ `get_utm_path()` - UTM –ø—É—Ç–∏

### 4. API Client –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ

**–§–∞–π–ª:** `frontend/lib/api-client.ts`

**–î–æ–±–∞–≤–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã:**
- ‚úÖ `getMetrikaVisitorsByDate()`
- ‚úÖ `getMetrikaTrafficSources()`
- ‚úÖ `getMetrikaSearchQueries()`
- ‚úÖ `getMetrikaGeography()`
- ‚úÖ `getMetrikaUtmPath()`
- ‚úÖ `getMetrikaSummary()`

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

```
/dashboard/analytics/yandex-metrika
‚îú‚îÄ‚îÄ –í—ã–±–æ—Ä —Å—á–µ—Ç—á–∏–∫–∞ (CounterSelector)
‚îú‚îÄ‚îÄ SummaryView (–±–∞–∑–æ–≤–∞—è —Å–≤–æ–¥–∫–∞)
‚îî‚îÄ‚îÄ AnalyticsDashboard (–≥—Ä–∞—Ñ–∏–∫–∏ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞)
    ‚îú‚îÄ‚îÄ –í—ã–±–æ—Ä –ø–µ—Ä–∏–æ–¥–∞ (7/14/30/90 –¥–Ω–µ–π)
    ‚îú‚îÄ‚îÄ –ì—Ä–∞—Ñ–∏–∫ –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏ –ø–æ –¥–Ω—è–º
    ‚îú‚îÄ‚îÄ –ò—Å—Ç–æ—á–Ω–∏–∫–∏ —Ç—Ä–∞—Ñ–∏–∫–∞ (Pie + Bar)
    ‚îú‚îÄ‚îÄ –¢–û–ü –ø–æ–∏—Å–∫–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ (—Ç–∞–±–ª–∏—Ü–∞)
    ‚îî‚îÄ‚îÄ –ì–µ–æ–≥—Ä–∞—Ñ–∏—è –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–µ–π (—Ç–∞–±–ª–∏—Ü–∞)
```

## üéØ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

1. –û—Ç–∫—Ä–æ–π—Ç–µ: `http://localhost:3000/dashboard/analytics/yandex-metrika`
2. –í—ã–±–µ—Ä–∏—Ç–µ —Å—á–µ—Ç—á–∏–∫ –∏–∑ dropdown
3. –í—ã–±–µ—Ä–∏—Ç–µ –ø–µ—Ä–∏–æ–¥ (7, 14, 30 –∏–ª–∏ 90 –¥–Ω–µ–π)
4. –ì—Ä–∞—Ñ–∏–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤—è—Ç—Å—è

## üìà –ì—Ä–∞—Ñ–∏–∫–∏

### 1. –ü–æ—Å–µ—â–∞–µ–º–æ—Å—Ç—å –ø–æ –¥–Ω—è–º
- **Bar Chart:** –í–∏–∑–∏—Ç—ã
- **Line Chart:** –ü–æ—Å–µ—Ç–∏—Ç–µ–ª–∏ –∏ –ø—Ä–æ—Å–º–æ—Ç—Ä—ã
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–∏–Ω–∞–º–∏–∫—É –∑–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥

### 2. –ò—Å—Ç–æ—á–Ω–∏–∫–∏ —Ç—Ä–∞—Ñ–∏–∫–∞
- **Pie Chart:** –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö
- **Bar Chart:** –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤–∏–∑–∏—Ç–æ–≤ –∏ –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–µ–π
- –¢–æ–ø-10 –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

### 3. –ü–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- –¢–∞–±–ª–∏—Ü–∞ —Å –¢–û–ü-15 –∑–∞–ø—Ä–æ—Å–æ–≤
- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –≤–∏–∑–∏—Ç–æ–≤

### 4. –ì–µ–æ–≥—Ä–∞—Ñ–∏—è
- –¢–∞–±–ª–∏—Ü–∞ —Å –¢–û–ü-20 –≥–æ—Ä–æ–¥–æ–≤
- –°—Ç—Ä–∞–Ω–∞, –≥–æ—Ä–æ–¥, –≤–∏–∑–∏—Ç—ã, –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–∏

## üé® –î–∏–∑–∞–π–Ω

- ‚úÖ –¢–µ–º–Ω–∞—è —Ç–µ–º–∞ (–∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è –ø–æ–¥ —Å–∏—Å—Ç–µ–º–Ω—É—é —Ç–µ–º—É)
- ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –≤–µ—Ä—Å—Ç–∫–∞ (grid, responsive)
- ‚úÖ –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏ (hover, tooltips)
- ‚úÖ –ö—Ä–∞—Å–∏–≤—ã–µ —Ü–≤–µ—Ç–∞ –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–æ–≤
- ‚úÖ –ü–ª–∞–≤–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

–í—Å–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ API –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É—é—Ç—Å—è –≤ –Ω—É–∂–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç:
- Dimensions (–æ–±—ä–µ–∫—Ç—ã —Å `name`) ‚Üí —Å—Ç—Ä–æ–∫–∏
- Metrics (–º–∞—Å—Å–∏–≤—ã —á–∏—Å–µ–ª) ‚Üí –æ–∫—Ä—É–≥–ª–µ–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø—É—Å—Ç—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

- –ü–æ–∫–∞–∑ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—É—Å—Ç—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª—å

## ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–æ–∑–¥–∞–Ω—ã –∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã. –û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏ –Ω–∞—Å–ª–∞–∂–¥–∞–π—Ç–µ—Å—å –∫—Ä–∞—Å–∏–≤–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π! üéâ


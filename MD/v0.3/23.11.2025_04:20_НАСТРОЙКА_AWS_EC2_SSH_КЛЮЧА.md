# üîê –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSH –∫–ª—é—á–∞ –¥–ª—è AWS EC2

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 23.11.2025 04:20  
**Instance:** i-0fd42f4b1d227227e (test-agent-node)  
**IP:** 13.220.11.94

---

## ‚úÖ –ß—Ç–æ —É–∂–µ —Å–¥–µ–ª–∞–Ω–æ

- ‚úÖ SSH –∫–ª—é—á —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω: `~/.ssh/github_actions_deploy`
- ‚úÖ –°–µ–∫—Ä–µ—Ç—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ GitHub:
  - ‚úÖ `VPS_HOST` = `13.220.11.94`
  - ‚úÖ `VPS_USER` = `ec2-user`
  - ‚úÖ `VPS_SSH_KEY` = –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á

---

## ‚ö†Ô∏è –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –°–ï–ô–ß–ê–°

### –î–æ–±–∞–≤–∏—Ç—å –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –Ω–∞ EC2 —Å–µ—Ä–≤–µ—Ä

**–ü—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á:**
```
ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIMwT/Dn9wnIj/zQFK2rkK0vpCBIu0Ke/yxkmXZFNSeDS github-actions-deploy
```

---

## üöÄ –°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ AWS EC2 Console (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

### –®–∞–≥ 1: –ü–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–µ—Ä—É

**–ï—Å–ª–∏ —É —Ç–µ–±—è –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ AWS Key Pair:**

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É –∏—Å–ø–æ–ª—å–∑—É—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–ª—é—á
ssh -i ~/.ssh/your-aws-key.pem ec2-user@13.220.11.94
```

**–ò–ª–∏ —á–µ—Ä–µ–∑ AWS Systems Manager Session Manager:**
1. –û—Ç–∫—Ä–æ–π AWS Console ‚Üí EC2 ‚Üí Instances
2. –í—ã–±–µ—Ä–∏ instance `i-0fd42f4b1d227227e`
3. –ù–∞–∂–º–∏ "Connect" ‚Üí "Session Manager" ‚Üí "Connect"

### –®–∞–≥ 2: –î–æ–±–∞–≤–∏—Ç—å –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –Ω–∞ —Å–µ—Ä–≤–µ—Ä

**–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤—ã–ø–æ–ª–Ω–∏:**

```bash
# –°–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –µ—Å–ª–∏ –Ω–µ—Ç
mkdir -p ~/.ssh
chmod 700 ~/.ssh

# –î–æ–±–∞–≤–∏—Ç—å –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á
echo "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIMwT/Dn9wnIj/zQFK2rkK0vpCBIu0Ke/yxkmXZFNSeDS github-actions-deploy" >> ~/.ssh/authorized_keys

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞
chmod 600 ~/.ssh/authorized_keys

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å
cat ~/.ssh/authorized_keys
```

---

## üöÄ –°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ AWS Systems Manager (–µ—Å–ª–∏ –Ω–µ—Ç SSH –¥–æ—Å—Ç—É–ø–∞)

### –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å SSM Agent (–µ—Å–ª–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)

SSM Agent –æ–±—ã—á–Ω–æ —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–∞ Amazon Linux 2023.

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
sudo systemctl status amazon-ssm-agent
```

### –®–∞–≥ 2: –í—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É —á–µ—Ä–µ–∑ SSM

**–ß–µ—Ä–µ–∑ AWS CLI:**

```bash
aws ssm send-command \
  --instance-ids "i-0fd42f4b1d227227e" \
  --document-name "AWS-RunShellScript" \
  --parameters 'commands=[
    "mkdir -p ~/.ssh",
    "chmod 700 ~/.ssh",
    "echo \"ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIMwT/Dn9wnIj/zQFK2rkK0vpCBIu0Ke/yxkmXZFNSeDS github-actions-deploy\" >> ~/.ssh/authorized_keys",
    "chmod 600 ~/.ssh/authorized_keys"
  ]' \
  --region us-east-1
```

**–ò–ª–∏ —á–µ—Ä–µ–∑ AWS Console:**
1. EC2 ‚Üí Instances ‚Üí i-0fd42f4b1d227227e
2. Actions ‚Üí Connect ‚Üí Session Manager
3. –í—ã–ø–æ–ª–Ω–∏ –∫–æ–º–∞–Ω–¥—ã –≤—ã—à–µ

---

## üöÄ –°–ø–æ—Å–æ–± 3: –ß–µ—Ä–µ–∑ User Data (–µ—Å–ª–∏ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å)

**–ï—Å–ª–∏ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å instance, –¥–æ–±–∞–≤—å –≤ User Data:**

```bash
#!/bin/bash
mkdir -p /home/ec2-user/.ssh
chmod 700 /home/ec2-user/.ssh
echo "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIMwT/Dn9wnIj/zQFK2rkK0vpCBIu0Ke/yxkmXZFNSeDS github-actions-deploy" >> /home/ec2-user/.ssh/authorized_keys
chmod 600 /home/ec2-user/.ssh/authorized_keys
```

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

**–ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–ª—é—á–∞:**

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
ssh -i ~/.ssh/github_actions_deploy ec2-user@13.220.11.94

# –î–æ–ª–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –±–µ–∑ –ø–∞—Ä–æ–ª—è
```

---

## üß™ –¢–µ—Å—Ç workflow

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ SSH:

1. –û—Ç–∫—Ä–æ–π: https://github.com/aoneagency001-maker/lead-generation-system/actions
2. –í—ã–±–µ—Ä–∏ "üöÄ Auto Deploy to VPS"
3. –ù–∞–∂–º–∏ "Run workflow" ‚Üí "Run workflow"
4. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ - —à–∞–≥ "Setup SSH" –¥–æ–ª–∂–µ–Ω –ø—Ä–æ–π—Ç–∏

---

## üìã –ß–µ–∫–ª–∏—Å—Ç

- [x] SSH –∫–ª—é—á —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω
- [x] –°–µ–∫—Ä–µ—Ç—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ GitHub
- [ ] –ü—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –¥–æ–±–∞–≤–ª–µ–Ω –Ω–∞ EC2 —Å–µ—Ä–≤–µ—Ä
- [ ] SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Workflow –∑–∞–ø—É—â–µ–Ω –∏ –ø—Ä–æ—à—ë–ª —É—Å–ø–µ—à–Ω–æ

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 23.11.2025 04:20  
**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –Ω–∞ —Å–µ—Ä–≤–µ—Ä


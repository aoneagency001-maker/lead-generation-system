# üóÑÔ∏è Database Schema - Lead Generation System

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 18.11.2025 04:40


–ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å—Ö–µ–º—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö PostgreSQL (Supabase).

---

## üìä –û–±–∑–æ—Ä

–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ 6 –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü:
1. **niches** - –ù–∏—à–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
2. **campaigns** - –ú–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ã–µ –∫–∞–º–ø–∞–Ω–∏–∏
3. **ads** - –û–±—ä—è–≤–ª–µ–Ω–∏—è
4. **leads** - –õ–∏–¥—ã
5. **conversations** - –ò—Å—Ç–æ—Ä–∏—è –æ–±—â–µ–Ω–∏—è —Å –ª–∏–¥–∞–º–∏
6. **market_research** - –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è —Ä—ã–Ω–∫–∞

---

## üìã –¢–∞–±–ª–∏—Ü—ã

### 1. niches (–ù–∏—à–∏)

–•—Ä–∞–Ω–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –Ω–∏—à–∞—Ö –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.

| –ö–æ–ª–æ–Ω–∫–∞ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|-----|----------|
| `id` | UUID | –ü–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á |
| `name` | VARCHAR(255) | –ù–∞–∑–≤–∞–Ω–∏–µ –Ω–∏—à–∏ |
| `category` | VARCHAR(100) | –ö–∞—Ç–µ–≥–æ—Ä–∏—è (electronics_repair, etc.) |
| `description` | TEXT | –û–ø–∏—Å–∞–Ω–∏–µ –Ω–∏—à–∏ |
| `status` | VARCHAR(50) | –°—Ç–∞—Ç—É—Å: research, active, paused, completed, rejected |
| `cpl_target` | DECIMAL(10,2) | –¶–µ–ª–µ–≤–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –ª–∏–¥–∞ (KZT) |
| `roi_target` | DECIMAL(10,2) | –¶–µ–ª–µ–≤–æ–π ROI (%) |
| `market_size` | INTEGER | –†–∞–∑–º–µ—Ä —Ä—ã–Ω–∫–∞ |
| `competition_level` | VARCHAR(50) | –£—Ä–æ–≤–µ–Ω—å –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏–∏: low, medium, high |
| `avg_price` | DECIMAL(10,2) | –°—Ä–µ–¥–Ω—è—è —Ü–µ–Ω–∞ –≤ –Ω–∏—à–µ |
| `seasonality` | JSONB | –°–µ–∑–æ–Ω–Ω–æ—Å—Ç—å: {winter: true, summer: false, ...} |
| `created_at` | TIMESTAMP | –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è |
| `updated_at` | TIMESTAMP | –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è |
| `started_at` | TIMESTAMP | –î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è |
| `completed_at` | TIMESTAMP | –î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è |

**–ò–Ω–¥–µ–∫—Å—ã:**
- `idx_niches_status` - –ü–æ–∏—Å–∫ –ø–æ —Å—Ç–∞—Ç—É—Å—É
- `idx_niches_created_at` - –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–∞—Ç–µ —Å–æ–∑–¥–∞–Ω–∏—è

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø–∏—Å–∏:**
```json
{
  "id": "550e8400-e29b-41d4-a716-446655440000",
  "name": "–†–µ–º–æ–Ω—Ç –Ω–æ—É—Ç–±—É–∫–æ–≤",
  "category": "electronics_repair",
  "description": "–ë—ã—Å—Ç—Ä—ã–π —Ä–µ–º–æ–Ω—Ç –Ω–æ—É—Ç–±—É–∫–æ–≤ –≤—Å–µ—Ö –º–∞—Ä–æ–∫",
  "status": "active",
  "cpl_target": 500.0,
  "roi_target": 300.0,
  "market_size": 10000,
  "competition_level": "medium",
  "avg_price": 8000.0,
  "seasonality": {"winter": true, "summer": false},
  "created_at": "2024-11-17T10:00:00Z"
}
```

---

### 2. campaigns (–ö–∞–º–ø–∞–Ω–∏–∏)

–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ã–µ –∫–∞–º–ø–∞–Ω–∏–∏ –ø–æ –Ω–∏—à–∞–º.

| –ö–æ–ª–æ–Ω–∫–∞ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|-----|----------|
| `id` | UUID | –ü–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á |
| `niche_id` | UUID | –°—Å—ã–ª–∫–∞ –Ω–∞ –Ω–∏—à—É (FK) |
| `name` | VARCHAR(255) | –ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞–º–ø–∞–Ω–∏–∏ |
| `platform` | VARCHAR(50) | –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞: olx, kaspi, telegram, whatsapp |
| `status` | VARCHAR(50) | –°—Ç–∞—Ç—É—Å: draft, active, paused, completed, failed |
| `budget` | DECIMAL(10,2) | –ë—é–¥–∂–µ—Ç –∫–∞–º–ø–∞–Ω–∏–∏ (KZT) |
| `budget_spent` | DECIMAL(10,2) | –ü–æ—Ç—Ä–∞—á–µ–Ω–æ (KZT) |
| `target_leads` | INTEGER | –¶–µ–ª–µ–≤–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª–∏–¥–æ–≤ |
| `start_date` | DATE | –î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ |
| `end_date` | DATE | –î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è |
| `config` | JSONB | –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã |
| `created_at` | TIMESTAMP | –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è |
| `updated_at` | TIMESTAMP | –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è |

**–ò–Ω–¥–µ–∫—Å—ã:**
- `idx_campaigns_niche_id` - –ü–æ–∏—Å–∫ –ø–æ –Ω–∏—à–µ
- `idx_campaigns_status` - –ü–æ–∏—Å–∫ –ø–æ —Å—Ç–∞—Ç—É—Å—É
- `idx_campaigns_platform` - –ü–æ–∏—Å–∫ –ø–æ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø–∏—Å–∏:**
```json
{
  "id": "660e8400-e29b-41d4-a716-446655440000",
  "niche_id": "550e8400-e29b-41d4-a716-446655440000",
  "name": "OLX –ê–ª–º–∞—Ç—ã - –†–µ–º–æ–Ω—Ç –Ω–æ—É—Ç–±—É–∫–æ–≤",
  "platform": "olx",
  "status": "active",
  "budget": 50000.0,
  "budget_spent": 15000.0,
  "target_leads": 100,
  "start_date": "2024-11-20",
  "end_date": "2024-12-20",
  "config": {
    "city": "almaty",
    "category": "electronics",
    "posting_schedule": "daily"
  },
  "created_at": "2024-11-17T10:00:00Z"
}
```

---

### 3. ads (–û–±—ä—è–≤–ª–µ–Ω–∏—è)

–û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è.

| –ö–æ–ª–æ–Ω–∫–∞ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|-----|----------|
| `id` | UUID | –ü–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á |
| `campaign_id` | UUID | –°—Å—ã–ª–∫–∞ –Ω–∞ –∫–∞–º–ø–∞–Ω–∏—é (FK) |
| `platform` | VARCHAR(50) | –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞: olx, kaspi, telegram |
| `external_id` | VARCHAR(255) | ID –æ–±—ä—è–≤–ª–µ–Ω–∏—è –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ |
| `title` | VARCHAR(255) | –ó–∞–≥–æ–ª–æ–≤–æ–∫ –æ–±—ä—è–≤–ª–µ–Ω–∏—è |
| `description` | TEXT | –û–ø–∏—Å–∞–Ω–∏–µ |
| `price` | DECIMAL(10,2) | –¶–µ–Ω–∞ (KZT) |
| `images` | JSONB | –ú–∞—Å—Å–∏–≤ URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π |
| `status` | VARCHAR(50) | –°—Ç–∞—Ç—É—Å: draft, posted, active, expired, deleted |
| `posted_at` | TIMESTAMP | –î–∞—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ |
| `expires_at` | TIMESTAMP | –î–∞—Ç–∞ –∏—Å—Ç–µ—á–µ–Ω–∏—è |
| `views` | INTEGER | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ |
| `contacts` | INTEGER | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ |
| `created_at` | TIMESTAMP | –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è |

**–ò–Ω–¥–µ–∫—Å—ã:**
- `idx_ads_campaign_id` - –ü–æ–∏—Å–∫ –ø–æ –∫–∞–º–ø–∞–Ω–∏–∏
- `idx_ads_status` - –ü–æ–∏—Å–∫ –ø–æ —Å—Ç–∞—Ç—É—Å—É
- `idx_ads_external_id` - –ü–æ–∏—Å–∫ –ø–æ –≤–Ω–µ—à–Ω–µ–º—É ID

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø–∏—Å–∏:**
```json
{
  "id": "770e8400-e29b-41d4-a716-446655440000",
  "campaign_id": "660e8400-e29b-41d4-a716-446655440000",
  "platform": "olx",
  "external_id": "olx-123456",
  "title": "–ë—ã—Å—Ç—Ä—ã–π —Ä–µ–º–æ–Ω—Ç –Ω–æ—É—Ç–±—É–∫–æ–≤ –≤ –ê–ª–º–∞—Ç—ã",
  "description": "–†–µ–º–æ–Ω—Ç–∏—Ä—É–µ–º –≤—Å–µ –º–∞—Ä–∫–∏ –Ω–æ—É—Ç–±—É–∫–æ–≤...",
  "price": 8000.0,
  "images": ["https://example.com/img1.jpg"],
  "status": "active",
  "posted_at": "2024-11-20T09:00:00Z",
  "expires_at": "2024-12-20T09:00:00Z",
  "views": 150,
  "contacts": 12,
  "created_at": "2024-11-20T08:00:00Z"
}
```

---

### 4. leads (–õ–∏–¥—ã)

–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç—ã.

| –ö–æ–ª–æ–Ω–∫–∞ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|-----|----------|
| `id` | UUID | –ü–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á |
| `campaign_id` | UUID | –°—Å—ã–ª–∫–∞ –Ω–∞ –∫–∞–º–ø–∞–Ω–∏—é (FK) |
| `ad_id` | UUID | –°—Å—ã–ª–∫–∞ –Ω–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ (FK, optional) |
| `source` | VARCHAR(50) | –ò—Å—Ç–æ—á–Ω–∏–∫: olx, kaspi, telegram, whatsapp |
| `source_id` | VARCHAR(255) | ID –ª–∏–¥–∞ –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ |
| `name` | VARCHAR(255) | –ò–º—è –ª–∏–¥–∞ |
| `phone` | VARCHAR(50) | –¢–µ–ª–µ—Ñ–æ–Ω |
| `telegram_username` | VARCHAR(255) | Telegram username |
| `whatsapp_number` | VARCHAR(50) | WhatsApp –Ω–æ–º–µ—Ä |
| `status` | VARCHAR(50) | –°—Ç–∞—Ç—É—Å: new, contacted, qualified, hot, won, lost, spam |
| `quality_score` | INTEGER | –û—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ (0-100) |
| `qualification_data` | JSONB | –î–∞–Ω–Ω—ã–µ –∫–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏–∏ |
| `assigned_to` | UUID | ID –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –ø—Ä–æ–¥–∞–∂ |
| `created_at` | TIMESTAMP | –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è |
| `updated_at` | TIMESTAMP | –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è |

**–ò–Ω–¥–µ–∫—Å—ã:**
- `idx_leads_campaign_id` - –ü–æ–∏—Å–∫ –ø–æ –∫–∞–º–ø–∞–Ω–∏–∏
- `idx_leads_status` - –ü–æ–∏—Å–∫ –ø–æ —Å—Ç–∞—Ç—É—Å—É
- `idx_leads_created_at` - –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–∞—Ç–µ
- `idx_leads_phone` - –ü–æ–∏—Å–∫ –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø–∏—Å–∏:**
```json
{
  "id": "880e8400-e29b-41d4-a716-446655440000",
  "campaign_id": "660e8400-e29b-41d4-a716-446655440000",
  "ad_id": "770e8400-e29b-41d4-a716-446655440000",
  "source": "whatsapp",
  "source_id": "wa-123456",
  "name": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
  "phone": "+7 777 123 4567",
  "whatsapp_number": "+7 777 123 4567",
  "status": "qualified",
  "quality_score": 85,
  "qualification_data": {
    "budget": 15000.0,
    "urgency": "high",
    "decision_maker": true
  },
  "assigned_to": null,
  "created_at": "2024-11-20T10:00:00Z",
  "updated_at": "2024-11-20T10:30:00Z"
}
```

---

### 5. conversations (–ò—Å—Ç–æ—Ä–∏—è –æ–±—â–µ–Ω–∏—è)

–°–æ–æ–±—â–µ–Ω–∏—è —Å –ª–∏–¥–∞–º–∏.

| –ö–æ–ª–æ–Ω–∫–∞ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|-----|----------|
| `id` | UUID | –ü–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á |
| `lead_id` | UUID | –°—Å—ã–ª–∫–∞ –Ω–∞ –ª–∏–¥ (FK) |
| `message` | TEXT | –¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è |
| `sender` | VARCHAR(50) | –û—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å: bot, lead, human |
| `platform` | VARCHAR(50) | –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞: whatsapp, telegram, olx, kaspi |
| `metadata` | JSONB | –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (intent, sentiment) |
| `created_at` | TIMESTAMP | –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è |

**–ò–Ω–¥–µ–∫—Å—ã:**
- `idx_conversations_lead_id` - –ü–æ–∏—Å–∫ –ø–æ –ª–∏–¥—É
- `idx_conversations_created_at` - –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–∞—Ç–µ

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø–∏—Å–∏:**
```json
{
  "id": "990e8400-e29b-41d4-a716-446655440000",
  "lead_id": "880e8400-e29b-41d4-a716-446655440000",
  "message": "–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ, –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç —Ä–µ–º–æ–Ω—Ç MacBook",
  "sender": "lead",
  "platform": "whatsapp",
  "metadata": {
    "intent": "inquiry",
    "sentiment": "neutral"
  },
  "created_at": "2024-11-20T10:05:00Z"
}
```

---

### 6. market_research (–ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ —Ä—ã–Ω–∫–∞)

–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –Ω–∏—à.

| –ö–æ–ª–æ–Ω–∫–∞ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|-----|----------|
| `id` | UUID | –ü–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á |
| `niche_id` | UUID | –°—Å—ã–ª–∫–∞ –Ω–∞ –Ω–∏—à—É (FK) |
| `data_type` | VARCHAR(50) | –¢–∏–ø –¥–∞–Ω–Ω—ã—Ö: listings, trends, competitors, reviews |
| `region` | VARCHAR(100) | –†–µ–≥–∏–æ–Ω –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è |
| `data` | JSONB | –î–∞–Ω–Ω—ã–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è |
| `analyzed_at` | TIMESTAMP | –î–∞—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞ |

**–ò–Ω–¥–µ–∫—Å—ã:**
- `idx_market_research_niche_id` - –ü–æ–∏—Å–∫ –ø–æ –Ω–∏—à–µ
- `idx_market_research_data_type` - –ü–æ–∏—Å–∫ –ø–æ —Ç–∏–ø—É –¥–∞–Ω–Ω—ã—Ö

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø–∏—Å–∏:**
```json
{
  "id": "aa0e8400-e29b-41d4-a716-446655440000",
  "niche_id": "550e8400-e29b-41d4-a716-446655440000",
  "data_type": "listings",
  "region": "almaty",
  "data": {
    "total_listings": 150,
    "avg_price": 8000.0,
    "price_range": {"min": 3000, "max": 20000},
    "competition_density": 0.45
  },
  "analyzed_at": "2024-11-17T10:00:00Z"
}
```

---

## üîó –°–≤—è–∑–∏ –º–µ–∂–¥—É —Ç–∞–±–ª–∏—Ü–∞–º–∏

```
niches (1) ‚îÄ‚îÄ‚Üí (N) campaigns
campaigns (1) ‚îÄ‚îÄ‚Üí (N) ads
campaigns (1) ‚îÄ‚îÄ‚Üí (N) leads
ads (1) ‚îÄ‚îÄ‚Üí (N) leads (optional)
leads (1) ‚îÄ‚îÄ‚Üí (N) conversations
niches (1) ‚îÄ‚îÄ‚Üí (N) market_research
```

---

## üîÑ –¢—Ä–∏–≥–≥–µ—Ä—ã

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ updated_at

–í—Å–µ —Ç–∞–±–ª–∏—Ü—ã —Å –ø–æ–ª–µ–º `updated_at` –∏–º–µ—é—Ç —Ç—Ä–∏–≥–≥–µ—Ä –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:

```sql
CREATE OR REPLACE FUNCTION update_updated_at_column()
RETURNS TRIGGER AS $$
BEGIN
    NEW.updated_at = CURRENT_TIMESTAMP;
    RETURN NEW;
END;
$$ language 'plpgsql';
```

---

## üìä Views (–ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è)

### campaign_stats
–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–∞–º–ø–∞–Ω–∏—è–º.

```sql
CREATE VIEW campaign_stats AS
SELECT 
    c.id,
    c.name,
    COUNT(DISTINCT a.id) as ads_count,
    COUNT(DISTINCT l.id) as leads_count,
    SUM(l.quality_score) / NULLIF(COUNT(l.id), 0) as avg_quality_score,
    c.budget_spent / NULLIF(COUNT(l.id), 0) as cpl
FROM campaigns c
LEFT JOIN ads a ON a.campaign_id = c.id
LEFT JOIN leads l ON l.campaign_id = c.id
GROUP BY c.id, c.name;
```

---

## üîê Row Level Security (RLS)

–í production —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –≤–∫–ª—é—á–∏—Ç—å RLS –¥–ª—è:
- –ò–∑–æ–ª—è—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞ –∫ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–º –¥–∞–Ω–Ω—ã–º
- –ê—É–¥–∏—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

---

## üìà –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –∏–Ω–¥–µ–∫—Å—ã (—É–∂–µ —Å–æ–∑–¥–∞–Ω—ã):
- –í—Å–µ –≤–Ω–µ—à–Ω–∏–µ –∫–ª—é—á–∏
- –ß–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–æ–ª—è –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ (status, platform)
- –ü–æ–ª—è –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ (created_at)

### –ü–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ (–¥–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤):
- `conversations` - –ø–æ –¥–∞—Ç–µ (monthly partitions)
- `market_research` - –ø–æ niche_id

---

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏–∏

–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ö–µ–º—ã –¥–æ–ª–∂–Ω—ã –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è —á–µ—Ä–µ–∑ –º–∏–≥—Ä–∞—Ü–∏–∏:
1. –°–æ–∑–¥–∞—Ç—å SQL —Ñ–∞–π–ª –º–∏–≥—Ä–∞—Ü–∏–∏
2. –ü—Ä–∏–º–µ–Ω–∏—Ç—å —á–µ—Ä–µ–∑ Supabase SQL Editor
3. –û–±–Ω–æ–≤–∏—Ç—å `schema.sql` –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2024-11-17  
**–í–µ—Ä—Å–∏—è —Å—Ö–µ–º—ã:** 1.0

